<Window x:Class="MusicEngineEditor.Views.Dialogs.AudioSuiteDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="AudioSuite - Offline Processing"
        Width="800" Height="600"
        MinWidth="650" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="{DynamicResource BackgroundBrush}"
        Foreground="{DynamicResource ForegroundBrush}">

    <Window.Resources>
        <!-- Colors -->
        <Color x:Key="BackgroundColor">#0D0D0D</Color>
        <Color x:Key="PanelBackgroundColor">#181818</Color>
        <Color x:Key="BorderColor">#2A2A2A</Color>
        <Color x:Key="TextPrimaryColor">#E0E0E0</Color>
        <Color x:Key="TextSecondaryColor">#808080</Color>
        <Color x:Key="AccentColor">#55AAFF</Color>
        <Color x:Key="SuccessColor">#00CC66</Color>
        <Color x:Key="WarningColor">#FF9800</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}"/>
        <SolidColorBrush x:Key="PanelBackgroundBrush" Color="{StaticResource PanelBackgroundColor}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimaryColor}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondaryColor}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
        <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>

        <!-- Effect Category Item Style -->
        <Style x:Key="CategoryItemStyle" TargetType="TreeViewItem">
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
            <Setter Property="IsExpanded" Value="True"/>
        </Style>

        <!-- Effect Item Style -->
        <Style x:Key="EffectItemStyle" TargetType="ListBoxItem">
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#252525"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Slider Style -->
        <Style x:Key="ParameterSliderStyle" TargetType="Slider">
            <Setter Property="Margin" Value="0,4"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,16">
            <TextBlock Text="AudioSuite - Offline Processing" FontSize="20" FontWeight="SemiBold"/>
            <TextBlock x:Name="ClipInfoText" Text="Processing: No clip selected" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Effect Browser -->
        <Border Grid.Row="1" Grid.Column="0" Background="{StaticResource PanelBackgroundBrush}" CornerRadius="6" Margin="0,0,8,0" Padding="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Effects" FontWeight="SemiBold" Margin="0,0,0,8"/>

                <!-- Search Box -->
                <TextBox Grid.Row="1" x:Name="SearchBox"
                         Background="{StaticResource BackgroundBrush}"
                         Foreground="{StaticResource TextPrimaryBrush}"
                         BorderBrush="{StaticResource BorderBrush}"
                         Padding="8,6" Margin="0,0,0,8"
                         TextChanged="SearchBox_TextChanged">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush AlignmentX="Left" Stretch="None">
                                                <VisualBrush.Visual>
                                                    <TextBlock Text="Search effects..." Foreground="#808080" Margin="8,6"/>
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>

                <!-- Effect List -->
                <TreeView Grid.Row="2" x:Name="EffectTreeView"
                          Background="Transparent" BorderThickness="0"
                          SelectedItemChanged="EffectTreeView_SelectedItemChanged">
                    <TreeViewItem Header="Dynamics" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Compressor" Tag="Compressor" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Limiter" Tag="Limiter" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Gate" Tag="Gate" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Expander" Tag="Expander" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="De-Esser" Tag="DeEsser" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="EQ/Filter" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Parametric EQ" Tag="ParametricEQ" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Low Pass Filter" Tag="LowPass" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="High Pass Filter" Tag="HighPass" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Band Pass Filter" Tag="BandPass" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Notch Filter" Tag="Notch" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="Time-Based" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Reverb" Tag="Reverb" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Delay" Tag="Delay" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Chorus" Tag="Chorus" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Flanger" Tag="Flanger" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Phaser" Tag="Phaser" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="Pitch/Time" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Pitch Shift" Tag="PitchShift" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Time Stretch" Tag="TimeStretch" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Vocoder" Tag="Vocoder" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="Distortion" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Distortion" Tag="Distortion" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Bitcrusher" Tag="Bitcrusher" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Saturation" Tag="Saturation" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="Restoration" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Noise Reduction" Tag="NoiseReduction" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Declipping" Tag="Declipping" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Hum Removal" Tag="HumRemoval" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                    <TreeViewItem Header="Utility" Style="{StaticResource CategoryItemStyle}">
                        <ListBoxItem Content="Normalize" Tag="Normalize" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Gain" Tag="Gain" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="DC Offset" Tag="DCOffset" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Phase Invert" Tag="PhaseInvert" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Reverse" Tag="Reverse" Style="{StaticResource EffectItemStyle}"/>
                        <ListBoxItem Content="Fade In/Out" Tag="Fade" Style="{StaticResource EffectItemStyle}"/>
                    </TreeViewItem>
                </TreeView>
            </Grid>
        </Border>

        <!-- Parameters Panel -->
        <Border Grid.Row="1" Grid.Column="1" Background="{StaticResource PanelBackgroundBrush}" CornerRadius="6" Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Effect Name and Preset -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="SelectedEffectName" Text="Select an effect" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <ComboBox x:Name="PresetCombo" Width="150" Margin="0,0,8,0" SelectionChanged="PresetCombo_SelectionChanged">
                            <ComboBoxItem Content="Default"/>
                            <ComboBoxItem Content="Gentle"/>
                            <ComboBoxItem Content="Moderate"/>
                            <ComboBoxItem Content="Aggressive"/>
                        </ComboBox>
                        <Button Content="Save Preset" Click="SavePreset_Click" Padding="12,4"/>
                    </StackPanel>
                </Grid>

                <!-- Processing Mode -->
                <Border Grid.Row="1" Background="{StaticResource BackgroundBrush}" CornerRadius="4" Padding="12" Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Processing Mode:" VerticalAlignment="Center" Margin="0,0,12,0"/>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <RadioButton x:Name="ModeClipByClip" Content="Clip by Clip" IsChecked="True" Margin="0,0,16,0"/>
                            <RadioButton x:Name="ModeRegionByRegion" Content="Region by Region" Margin="0,0,16,0"/>
                            <RadioButton x:Name="ModeEntireSelection" Content="Entire Selection"/>
                        </StackPanel>

                        <CheckBox Grid.Column="2" x:Name="CreateNewFileCheck" Content="Create new file" IsChecked="True"/>
                    </Grid>
                </Border>

                <!-- Parameters ScrollViewer -->
                <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="ParametersPanel" Margin="0,0,16,0">
                        <!-- Parameters will be dynamically added here -->
                        <TextBlock Text="Select an effect to view parameters"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Margin="0,50,0,0"/>
                    </StackPanel>
                </ScrollViewer>

                <!-- Waveform Preview -->
                <Border Grid.Row="3" Background="{StaticResource BackgroundBrush}" CornerRadius="4" Height="100" Margin="0,16,0,0">
                    <Grid>
                        <Canvas x:Name="WaveformCanvas" ClipToBounds="True"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="8">
                            <Border Background="#44000000" CornerRadius="2" Padding="4,2" Margin="2">
                                <TextBlock Text="Original" Foreground="#999999" FontSize="10"/>
                            </Border>
                            <Border Background="#44000000" CornerRadius="2" Padding="4,2" Margin="2">
                                <TextBlock Text="Processed" Foreground="{StaticResource AccentBrush}" FontSize="10"/>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- Progress Bar -->
        <Border Grid.Row="2" Grid.ColumnSpan="2" Margin="0,16,0,0" Visibility="Collapsed" x:Name="ProgressPanel">
            <Grid>
                <ProgressBar x:Name="ProcessingProgress" Height="4" Background="{StaticResource PanelBackgroundBrush}" Foreground="{StaticResource AccentBrush}"/>
                <TextBlock x:Name="ProgressText" Text="Processing..." HorizontalAlignment="Center" Margin="0,8,0,0" Foreground="{StaticResource TextSecondaryBrush}"/>
            </Grid>
        </Border>

        <!-- Action Buttons -->
        <Grid Grid.Row="3" Grid.ColumnSpan="2" Margin="0,16,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                <Button x:Name="PreviewButton" Content="Preview" Click="Preview_Click" Padding="16,8" Margin="0,0,8,0"
                        Background="{StaticResource PanelBackgroundBrush}" Foreground="{StaticResource TextPrimaryBrush}"
                        BorderBrush="{StaticResource BorderBrush}"/>
                <Button x:Name="StopPreviewButton" Content="Stop" Click="StopPreview_Click" Padding="16,8" IsEnabled="False"
                        Background="{StaticResource PanelBackgroundBrush}" Foreground="{StaticResource TextPrimaryBrush}"
                        BorderBrush="{StaticResource BorderBrush}"/>
                <CheckBox x:Name="AutoPreviewCheck" Content="Auto-preview" VerticalAlignment="Center" Margin="16,0,0,0"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Compare A/B" Click="CompareAB_Click" Padding="16,8" Margin="0,0,8,0"
                        Background="{StaticResource PanelBackgroundBrush}" Foreground="{StaticResource TextPrimaryBrush}"
                        BorderBrush="{StaticResource BorderBrush}"/>
                <Button Content="Render" Click="Render_Click" Padding="20,8" Margin="0,0,8,0" IsDefault="True"
                        Background="{StaticResource AccentBrush}" Foreground="White" BorderBrush="{StaticResource AccentBrush}"/>
                <Button Content="Cancel" Click="Cancel_Click" Padding="20,8" IsCancel="True"
                        Background="{StaticResource PanelBackgroundBrush}" Foreground="{StaticResource TextPrimaryBrush}"
                        BorderBrush="{StaticResource BorderBrush}"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
